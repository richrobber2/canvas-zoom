import{S as h,e as m,s as d,J as f,K as c,p as w,M as _,n as u,A as y,k as b,o as v,z as S,v as x,x as A,B}from"./index-666c05ef.js";import{I as M}from"./IconButton-9196078c.js";import"./Button-41f5a565.js";function C(r){let e,n;return{c(){e=f("svg"),n=f("path"),c(n,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),c(n,"fill","currentColor"),c(e,"id","icon"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 32 32")},m(t,a){w(t,e,a),_(e,n)},p:u,i:u,o:u,d(t){t&&y(e)}}}class k extends h{constructor(e){super(),m(this,e,null,C,d,{})}}class l extends Error{constructor(e){super(e),this.name="ShareError"}}const I=async(r,e)=>{if(window.__gradio_space__==null)throw new l("Must be on Spaces to share.");let n,t,a;if(e==="url"){const o=await fetch(r);n=await o.blob(),t=o.headers.get("content-type")||"",a=o.headers.get("content-disposition")||""}else n=E(r),t=r.split(";")[0].split(":")[1],a="file"+t.split("/")[1];const s=new File([n],a,{type:t}),i=await fetch("https://huggingface.co/uploads",{method:"POST",body:s,headers:{"Content-Type":s.type,"X-Requested-With":"XMLHttpRequest"}});if(!i.ok){if(i.headers.get("content-type")?.includes("application/json")){const o=await i.json();throw new l(`Upload failed: ${o.error}`)}throw new l("Upload failed.")}return await i.text()};function E(r){for(var e=r.split(","),n=e[0].match(/:(.*?);/)[1],t=atob(e[1]),a=t.length,s=new Uint8Array(a);a--;)s[a]=t.charCodeAt(a);return new Blob([s],{type:n})}function R(r){let e,n;return e=new M({props:{Icon:k,label:"Share",pending:r[2]}}),e.$on("click",r[4]),{c(){b(e.$$.fragment)},m(t,a){v(e,t,a),n=!0},p(t,[a]){const s={};a&4&&(s.pending=t[2]),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function T(r,e,n){const t=B();let{formatter:a}=e,{value:s}=e,i=!1;const p=async()=>{try{n(2,i=!0);const o=await a(s);t("share",{description:o})}catch(o){console.error(o);let g=o instanceof l?o.message:"Share failed.";t("error",g)}finally{n(2,i=!1)}};return r.$$set=o=>{"formatter"in o&&n(0,a=o.formatter),"value"in o&&n(1,s=o.value)},[a,s,i,t,p]}class L extends h{constructor(e){super(),m(this,e,T,R,d,{formatter:0,value:1})}}export{L as S,I as u};
//# sourceMappingURL=ShareButton-314ebda9.js.map
