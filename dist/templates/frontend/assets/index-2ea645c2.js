import{S as N,e as O,s as P,N as G,O as H,k as Q,K as r,p as j,o as R,Q as K,z as D,v as I,A as q,x as T,a1 as J,B as V,a9 as L,ab as M,ac as Y,ad as Z,h as x,a4 as p,at as $,au as ee,P as le,R as ie,a7 as ne,F as te}from"./index-37129f75.js";import{a as ae}from"./Button-0da8c48a.js";import{b as se}from"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{X as fe}from"./Blocks-c0645bd4.js";function ue(l){let e;const i=l[17].default,n=L(i,l,l[19],null);return{c(){n&&n.c()},m(s,u){n&&n.m(s,u),e=!0},p(s,u){n&&n.p&&(!e||u&524288)&&M(n,i,s,s[19],e?Z(i,s[19],u,null):Y(s[19]),null)},i(s){e||(D(n,s),e=!0)},o(s){I(n,s),e=!1},d(s){n&&n.d(s)}}}function _e(l){let e,i,n,s,u,h,c,m,d,g;return c=new ae({props:{size:l[4],variant:l[8],elem_id:l[0],elem_classes:l[1],visible:l[2],scale:l[5],min_width:l[6],disabled:l[7]==="static",$$slots:{default:[ue]},$$scope:{ctx:l}}}),c.$on("click",l[12]),{c(){e=G("input"),h=H(),Q(c.$$.fragment),r(e,"class","hide svelte-ydeks8"),r(e,"accept",l[11]),r(e,"type","file"),e.multiple=i=l[3]==="multiple"||void 0,r(e,"webkitdirectory",n=l[3]==="directory"||void 0),r(e,"mozdirectory",s=l[3]==="directory"||void 0),r(e,"data-testid",u=l[9]+"-upload-button")},m(f,_){j(f,e,_),l[18](e),j(f,h,_),R(c,f,_),m=!0,d||(g=[K(e,"change",l[13]),K(e,"click",l[14])],d=!0)},p(f,[_]){(!m||_&2048)&&r(e,"accept",f[11]),(!m||_&8&&i!==(i=f[3]==="multiple"||void 0))&&(e.multiple=i),(!m||_&8&&n!==(n=f[3]==="directory"||void 0))&&r(e,"webkitdirectory",n),(!m||_&8&&s!==(s=f[3]==="directory"||void 0))&&r(e,"mozdirectory",s),(!m||_&512&&u!==(u=f[9]+"-upload-button"))&&r(e,"data-testid",u);const o={};_&16&&(o.size=f[4]),_&256&&(o.variant=f[8]),_&1&&(o.elem_id=f[0]),_&2&&(o.elem_classes=f[1]),_&4&&(o.visible=f[2]),_&32&&(o.scale=f[5]),_&64&&(o.min_width=f[6]),_&128&&(o.disabled=f[7]==="static"),_&524288&&(o.$$scope={dirty:_,ctx:f}),c.$set(o)},i(f){m||(D(c.$$.fragment,f),m=!0)},o(f){I(c.$$.fragment,f),m=!1},d(f){f&&(q(e),q(h)),l[18](null),T(c,f),d=!1,J(g)}}}function me(l,e,i){let{$$slots:n={},$$scope:s}=e,{elem_id:u=""}=e,{elem_classes:h=[]}=e,{visible:c=!0}=e,{file_count:m}=e,{file_types:d=[]}=e,{include_file_metadata:g=!0}=e,{size:f="lg"}=e,{scale:_=null}=e,{min_width:o=void 0}=e,{mode:k="dynamic"}=e,{variant:A="secondary"}=e,{label:B}=e,y;const E=V();let v;d==null?v=null:(d=d.map(t=>t.startsWith(".")?t:t+"/*"),v=d.join(", "));const C=()=>{y.click()},a=t=>{let w=Array.from(t);if(t.length){m==="single"&&(w=[t[0]]);var U=[];w.forEach((F,W)=>{U[W]=g?{name:F.name,size:F.size,data:"",blob:F}:F,U.filter(X=>X!==void 0).length===t.length&&E("load",m=="single"?U[0]:U)})}},S=t=>{const w=t.target;w.files&&a(w.files)},z=t=>{const w=t.target;w.value&&(w.value="")};function b(t){x[t?"unshift":"push"](()=>{y=t,i(10,y)})}return l.$$set=t=>{"elem_id"in t&&i(0,u=t.elem_id),"elem_classes"in t&&i(1,h=t.elem_classes),"visible"in t&&i(2,c=t.visible),"file_count"in t&&i(3,m=t.file_count),"file_types"in t&&i(15,d=t.file_types),"include_file_metadata"in t&&i(16,g=t.include_file_metadata),"size"in t&&i(4,f=t.size),"scale"in t&&i(5,_=t.scale),"min_width"in t&&i(6,o=t.min_width),"mode"in t&&i(7,k=t.mode),"variant"in t&&i(8,A=t.variant),"label"in t&&i(9,B=t.label),"$$scope"in t&&i(19,s=t.$$scope)},[u,h,c,m,f,_,o,k,A,B,y,v,C,S,z,d,g,n,b,s]}class oe extends N{constructor(e){super(),O(this,e,me,_e,P,{elem_id:0,elem_classes:1,visible:2,file_count:3,file_types:15,include_file_metadata:16,size:4,scale:5,min_width:6,mode:7,variant:8,label:9})}}function ce(l){let e=l[11](l[3])+"",i;return{c(){i=le(e)},m(n,s){j(n,i,s)},p(n,s){s&2056&&e!==(e=n[11](n[3])+"")&&ie(i,e)},d(n){n&&q(i)}}}function de(l){let e,i;return e=new oe({props:{elem_id:l[0],elem_classes:l[1],visible:l[2],file_count:l[4],file_types:l[5],size:l[6],scale:l[7],min_width:l[8],mode:l[9],variant:l[10],label:l[3],$$slots:{default:[ce]},$$scope:{ctx:l}}}),e.$on("click",l[15]),e.$on("load",l[12]),{c(){Q(e.$$.fragment)},m(n,s){R(e,n,s),i=!0},p(n,[s]){const u={};s&1&&(u.elem_id=n[0]),s&2&&(u.elem_classes=n[1]),s&4&&(u.visible=n[2]),s&16&&(u.file_count=n[4]),s&32&&(u.file_types=n[5]),s&64&&(u.size=n[6]),s&128&&(u.scale=n[7]),s&256&&(u.min_width=n[8]),s&512&&(u.mode=n[9]),s&1024&&(u.variant=n[10]),s&8&&(u.label=n[3]),s&264200&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(D(e.$$.fragment,n),i=!0)},o(n){I(e.$$.fragment,n),i=!1},d(n){T(e,n)}}}function be(l,e,i){let n;p(l,fe,a=>i(11,n=a));let{elem_id:s=""}=e,{elem_classes:u=[]}=e,{visible:h=!0}=e,{label:c}=e,{value:m}=e,{file_count:d}=e,{file_types:g=[]}=e,{root:f}=e,{size:_="lg"}=e,{scale:o=null}=e,{min_width:k=void 0}=e,{mode:A="dynamic"}=e,{variant:B="secondary"}=e;const y=$("upload_files")??ee;async function E({detail:a}){i(13,m=a),await ne();let S=(Array.isArray(a)?a:[a]).map(z=>z.blob);y(f,S).then(async z=>{z.error?(Array.isArray(a)?a:[a]).forEach(async(b,t)=>{b.data=await se(b.blob),b.blob=void 0}):(Array.isArray(a)?a:[a]).forEach((b,t)=>{z.files&&(b.orig_name=b.name,b.name=z.files[t],b.is_file=!0,b.blob=void 0)}),v("change",m),v("upload",a)})}const v=V();function C(a){te.call(this,l,a)}return l.$$set=a=>{"elem_id"in a&&i(0,s=a.elem_id),"elem_classes"in a&&i(1,u=a.elem_classes),"visible"in a&&i(2,h=a.visible),"label"in a&&i(3,c=a.label),"value"in a&&i(13,m=a.value),"file_count"in a&&i(4,d=a.file_count),"file_types"in a&&i(5,g=a.file_types),"root"in a&&i(14,f=a.root),"size"in a&&i(6,_=a.size),"scale"in a&&i(7,o=a.scale),"min_width"in a&&i(8,k=a.min_width),"mode"in a&&i(9,A=a.mode),"variant"in a&&i(10,B=a.variant)},[s,u,h,c,d,g,_,o,k,A,B,n,E,m,f,C]}class re extends N{constructor(e){super(),O(this,e,be,de,P,{elem_id:0,elem_classes:1,visible:2,label:3,value:13,file_count:4,file_types:5,root:14,size:6,scale:7,min_width:8,mode:9,variant:10})}}const ye=re,ve=["static","dynamic"];export{ye as Component,ve as modes};
//# sourceMappingURL=index-2ea645c2.js.map
