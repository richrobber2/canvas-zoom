import{S as _e,e as ce,s as he,Z as me,O as R,m as Le,p as C,Q as V,z,u as K,v as G,y as O,A as D,B as Ne,k as q,o as H,x as I,a7 as Re,h as ee,F as U,G as Q,N as S,K as w,L,U as N,M as A,ar as Te,V as ge,T as y,a1 as qe,P as de,R as be,E as He,ae as Ie,q as Me,r as ye}from"./index-37129f75.js";import{B as Fe}from"./Button-0da8c48a.js";import{B as Pe}from"./BlockLabel-be497ac6.js";import{E as Ue}from"./Empty-f934949a.js";import{u as Ve,S as Xe}from"./ShareButton-1014e96e.js";import{n as le}from"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{M as Ke}from"./ModifyUpload-e5aecbb9.js";import{I as we}from"./Image-216f91b4.js";import"./IconButton-448eaa3f.js";const Oe=async l=>l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([e,i])=>e===null?"":await Ve(e.data,"url")))).map(e=>`<img src="${e}" style="height: 400px" />`).join("")}</div>`:"";function te(l,t,e){const i=l.slice();return i[37]=t[e][0],i[38]=t[e][1],i[40]=e,i}function ie(l,t,e){const i=l.slice();return i[37]=t[e],i[41]=t,i[40]=e,i}function ne(l){let t,e;return t=new Pe({props:{show_label:l[0],Icon:we,label:l[1]||"Gallery"}}),{c(){q(t.$$.fragment)},m(i,n){H(t,i,n),e=!0},p(i,n){const o={};n[0]&1&&(o.show_label=i[0]),n[0]&2&&(o.label=i[1]||"Gallery"),t.$set(o)},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){I(t,i)}}}function Qe(l){let t,e,i,n,o,g,a=l[10]!==null&&l[6]&&ae(l),s=l[8]&&oe(l),c=Q(l[9]),u=[];for(let r=0;r<c.length;r+=1)u[r]=ue(te(l,c,r));return{c(){a&&a.c(),t=R(),e=S("div"),i=S("div"),s&&s.c(),n=R();for(let r=0;r<u.length;r+=1)u[r].c();w(i,"class","grid-container svelte-1a6pxdl"),L(i,"--grid-cols",l[3]),L(i,"--grid-rows",l[4]),L(i,"--object-fit",l[7]),L(i,"height",l[5]),N(i,"pt-6",l[0]),w(e,"class","grid-wrap svelte-1a6pxdl"),me(()=>l[32].call(e)),N(e,"fixed-height",!l[5]||l[5]=="auto")},m(r,f){a&&a.m(r,f),C(r,t,f),C(r,e,f),A(e,i),s&&s.m(i,null),A(i,n);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(i,null);o=Te(e,l[32].bind(e)),g=!0},p(r,f){if(r[10]!==null&&r[6]?a?(a.p(r,f),f[0]&1088&&z(a,1)):(a=ae(r),a.c(),z(a,1),a.m(t.parentNode,t)):a&&(K(),G(a,1,1,()=>{a=null}),O()),r[8]?s?(s.p(r,f),f[0]&256&&z(s,1)):(s=oe(r),s.c(),z(s,1),s.m(i,n)):s&&(K(),G(s,1,1,()=>{s=null}),O()),f[0]&1536){c=Q(r[9]);let m;for(m=0;m<c.length;m+=1){const b=te(r,c,m);u[m]?u[m].p(b,f):(u[m]=ue(b),u[m].c(),u[m].m(i,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=c.length}(!g||f[0]&8)&&L(i,"--grid-cols",r[3]),(!g||f[0]&16)&&L(i,"--grid-rows",r[4]),(!g||f[0]&128)&&L(i,"--object-fit",r[7]),(!g||f[0]&32)&&L(i,"height",r[5]),(!g||f[0]&1)&&N(i,"pt-6",r[0]),(!g||f[0]&32)&&N(e,"fixed-height",!r[5]||r[5]=="auto")},i(r){g||(z(a),z(s),g=!0)},o(r){G(a),G(s),g=!1},d(r){r&&(D(t),D(e)),a&&a.d(r),s&&s.d(),ge(u,r),o()}}}function We(l){let t,e;return t=new Ue({props:{unpadded_box:!0,size:"large",$$slots:{default:[Ze]},$$scope:{ctx:l}}}),{c(){q(t.$$.fragment)},m(i,n){H(t,i,n),e=!0},p(i,n){const o={};n[1]&2048&&(o.$$scope={dirty:n,ctx:i}),t.$set(o)},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){I(t,i)}}}function ae(l){let t,e,i,n,o,g,a,s,c,u,r,f,m;e=new Ke({}),e.$on("clear",l[24]);let b=l[9][l[10]][1]&&se(l),E=Q(l[9]),j=[];for(let d=0;d<E.length;d+=1)j[d]=re(ie(l,E,d));return{c(){t=S("div"),q(e.$$.fragment),i=R(),n=S("img"),s=R(),b&&b.c(),c=R(),u=S("div");for(let d=0;d<j.length;d+=1)j[d].c();w(n,"data-testid","detailed-image"),y(n.src,o=l[9][l[10]][0].data)||w(n,"src",o),w(n,"alt",g=l[9][l[10]][1]||""),w(n,"title",a=l[9][l[10]][1]||null),L(n,"height","calc(100% - "+(l[9][l[10]][1]?"80px":"60px")+")"),w(n,"class","svelte-1a6pxdl"),N(n,"with-caption",!!l[9][l[10]][1]),w(u,"class","thumbnails scroll-hide svelte-1a6pxdl"),w(u,"data-testid","container_el"),w(t,"class","preview svelte-1a6pxdl")},m(d,B){C(d,t,B),H(e,t,null),A(t,i),A(t,n),A(t,s),b&&b.m(t,null),A(t,c),A(t,u);for(let k=0;k<j.length;k+=1)j[k]&&j[k].m(u,null);l[28](u),r=!0,f||(m=[V(n,"click",l[25]),V(t,"keydown",l[16])],f=!0)},p(d,B){if((!r||B[0]&1536&&!y(n.src,o=d[9][d[10]][0].data))&&w(n,"src",o),(!r||B[0]&1536&&g!==(g=d[9][d[10]][1]||""))&&w(n,"alt",g),(!r||B[0]&1536&&a!==(a=d[9][d[10]][1]||null))&&w(n,"title",a),(!r||B[0]&1536)&&L(n,"height","calc(100% - "+(d[9][d[10]][1]?"80px":"60px")+")"),(!r||B[0]&1536)&&N(n,"with-caption",!!d[9][d[10]][1]),d[9][d[10]][1]?b?b.p(d,B):(b=se(d),b.c(),b.m(t,c)):b&&(b.d(1),b=null),B[0]&3584){E=Q(d[9]);let k;for(k=0;k<E.length;k+=1){const T=ie(d,E,k);j[k]?j[k].p(T,B):(j[k]=re(T),j[k].c(),j[k].m(u,null))}for(;k<j.length;k+=1)j[k].d(1);j.length=E.length}},i(d){r||(z(e.$$.fragment,d),r=!0)},o(d){G(e.$$.fragment,d),r=!1},d(d){d&&D(t),I(e),b&&b.d(),ge(j,d),l[28](null),f=!1,qe(m)}}}function se(l){let t,e=l[9][l[10]][1]+"",i;return{c(){t=S("div"),i=de(e),w(t,"class","caption svelte-1a6pxdl")},m(n,o){C(n,t,o),A(t,i)},p(n,o){o[0]&1536&&e!==(e=n[9][n[10]][1]+"")&&be(i,e)},d(n){n&&D(t)}}}function re(l){let t,e,i,n,o,g,a=l[40],s,c;const u=()=>l[26](t,a),r=()=>l[26](null,a);function f(){return l[27](l[40])}return{c(){t=S("button"),e=S("img"),g=R(),y(e.src,i=l[37][0].data)||w(e,"src",i),w(e,"title",n=l[37][1]||null),w(e,"alt",o=l[37][1]||null),w(e,"class","svelte-1a6pxdl"),w(t,"class","thumbnail-item thumbnail-small svelte-1a6pxdl"),N(t,"selected",l[10]===l[40])},m(m,b){C(m,t,b),A(t,e),A(t,g),u(),s||(c=V(t,"click",f),s=!0)},p(m,b){l=m,b[0]&512&&!y(e.src,i=l[37][0].data)&&w(e,"src",i),b[0]&512&&n!==(n=l[37][1]||null)&&w(e,"title",n),b[0]&512&&o!==(o=l[37][1]||null)&&w(e,"alt",o),a!==l[40]&&(r(),a=l[40],u()),b[0]&1024&&N(t,"selected",l[10]===l[40])},d(m){m&&D(t),r(),s=!1,c()}}}function oe(l){let t,e,i;return e=new Xe({props:{value:l[9],formatter:Oe}}),e.$on("share",l[29]),e.$on("error",l[30]),{c(){t=S("div"),q(e.$$.fragment),w(t,"class","icon-button svelte-1a6pxdl")},m(n,o){C(n,t,o),H(e,t,null),i=!0},p(n,o){const g={};o[0]&512&&(g.value=n[9]),e.$set(g)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){G(e.$$.fragment,n),i=!1},d(n){n&&D(t),I(e)}}}function fe(l){let t,e=l[38]+"",i;return{c(){t=S("div"),i=de(e),w(t,"class","caption-label svelte-1a6pxdl")},m(n,o){C(n,t,o),A(t,i)},p(n,o){o[0]&512&&e!==(e=n[38]+"")&&be(i,e)},d(n){n&&D(t)}}}function ue(l){let t,e,i,n,o,g,a,s,c=l[38]&&fe(l);function u(){return l[31](l[40])}return{c(){t=S("button"),e=S("img"),o=R(),c&&c.c(),g=R(),w(e,"alt",i=l[38]||""),y(e.src,n=typeof l[37]=="string"?l[37]:l[37].data)||w(e,"src",n),w(e,"class","svelte-1a6pxdl"),w(t,"class","thumbnail-item thumbnail-lg svelte-1a6pxdl"),N(t,"selected",l[10]===l[40])},m(r,f){C(r,t,f),A(t,e),A(t,o),c&&c.m(t,null),A(t,g),a||(s=V(t,"click",u),a=!0)},p(r,f){l=r,f[0]&512&&i!==(i=l[38]||"")&&w(e,"alt",i),f[0]&512&&!y(e.src,n=typeof l[37]=="string"?l[37]:l[37].data)&&w(e,"src",n),l[38]?c?c.p(l,f):(c=fe(l),c.c(),c.m(t,g)):c&&(c.d(1),c=null),f[0]&1024&&N(t,"selected",l[10]===l[40])},d(r){r&&D(t),c&&c.d(),a=!1,s()}}}function Ze(l){let t,e;return t=new we({}),{c(){q(t.$$.fragment)},m(i,n){H(t,i,n),e=!0},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){I(t,i)}}}function Je(l){let t,e,i,n,o,g,a;me(l[23]);let s=l[0]&&ne(l);const c=[We,Qe],u=[];function r(f,m){return f[2]===null||f[9]===null||f[9].length===0?0:1}return e=r(l),i=u[e]=c[e](l),{c(){s&&s.c(),t=R(),i.c(),n=Le()},m(f,m){s&&s.m(f,m),C(f,t,m),u[e].m(f,m),C(f,n,m),o=!0,g||(a=V(window,"resize",l[23]),g=!0)},p(f,m){f[0]?s?(s.p(f,m),m[0]&1&&z(s,1)):(s=ne(f),s.c(),z(s,1),s.m(t.parentNode,t)):s&&(K(),G(s,1,1,()=>{s=null}),O());let b=e;e=r(f),e===b?u[e].p(f,m):(K(),G(u[b],1,1,()=>{u[b]=null}),O(),i=u[e],i?i.p(f,m):(i=u[e]=c[e](f),i.c()),z(i,1),i.m(n.parentNode,n))},i(f){o||(z(s),z(i),o=!0)},o(f){G(s),G(i),o=!1},d(f){f&&(D(t),D(n)),s&&s.d(f),u[e].d(f),g=!1,a()}}}function Ye(l,t,e){let i,n,{show_label:o=!0}=t,{label:g}=t,{root:a=""}=t,{root_url:s=null}=t,{value:c=null}=t,{grid_cols:u=[2]}=t,{grid_rows:r=void 0}=t,{height:f="auto"}=t,{preview:m}=t,{allow_preview:b=!0}=t,{object_fit:E="cover"}=t,{show_share_button:j=!1}=t;const d=Ne();let B=!0,k=null,T=c,v=m&&c?.length?0:null,F=v;function X(_){const P=_.target,J=_.clientX,Y=P.offsetWidth/2;J<Y?e(10,v=i):e(10,v=n)}function W(_){switch(_.code){case"Escape":_.preventDefault(),e(10,v=null);break;case"ArrowLeft":_.preventDefault(),e(10,v=i);break;case"ArrowRight":_.preventDefault(),e(10,v=n);break}}let h=[],M;async function ke(_){if(typeof _!="number")return;await Re(),h[_].focus();const{left:P,width:J}=M.getBoundingClientRect(),{left:x,width:Y}=h[_].getBoundingClientRect(),$=x-P+Y/2-J/2+M.scrollLeft;M?.scrollTo({left:$<0?0:$,behavior:"smooth"})}let Z=0,p=0;function ve(){e(14,p=window.innerHeight)}const je=()=>e(10,v=null),Be=_=>X(_);function ze(_,P){ee[_?"unshift":"push"](()=>{h[P]=_,e(11,h)})}const Ge=_=>e(10,v=_);function Ae(_){ee[_?"unshift":"push"](()=>{M=_,e(12,M)})}function Ee(_){U.call(this,l,_)}function Se(_){U.call(this,l,_)}const Ce=_=>e(10,v=_);function De(){Z=this.clientHeight,e(13,Z)}return l.$$set=_=>{"show_label"in _&&e(0,o=_.show_label),"label"in _&&e(1,g=_.label),"root"in _&&e(17,a=_.root),"root_url"in _&&e(18,s=_.root_url),"value"in _&&e(2,c=_.value),"grid_cols"in _&&e(3,u=_.grid_cols),"grid_rows"in _&&e(4,r=_.grid_rows),"height"in _&&e(5,f=_.height),"preview"in _&&e(19,m=_.preview),"allow_preview"in _&&e(6,b=_.allow_preview),"object_fit"in _&&e(7,E=_.object_fit),"show_share_button"in _&&e(8,j=_.show_share_button)},l.$$.update=()=>{l.$$.dirty[0]&1048580&&e(20,B=c==null||c.length==0?!0:B),l.$$.dirty[0]&393220&&e(9,k=c===null?null:c.map(_=>Array.isArray(_)?[le(_[0],a,s),_[1]]:[le(_,a,s),null])),l.$$.dirty[0]&3671044&&T!==c&&(B?(e(10,v=m&&c?.length?0:null),e(20,B=!1)):e(10,v=v!==null&&c!==null&&v<c.length?v:null),e(21,T=c)),l.$$.dirty[0]&1536&&(i=((v??0)+(k?.length??0)-1)%(k?.length??0)),l.$$.dirty[0]&1536&&(n=((v??0)+1)%(k?.length??0)),l.$$.dirty[0]&4195840&&v!==F&&(e(22,F=v),v!==null&&d("select",{index:v,value:k?.[v][1]})),l.$$.dirty[0]&1088&&b&&ke(v)},[o,g,c,u,r,f,b,E,j,k,v,h,M,Z,p,X,W,a,s,m,B,T,F,ve,je,Be,ze,Ge,Ae,Ee,Se,Ce,De]}class pe extends _e{constructor(t){super(),ce(this,t,Ye,Je,he,{show_label:0,label:1,root:17,root_url:18,value:2,grid_cols:3,grid_rows:4,height:5,preview:19,allow_preview:6,object_fit:7,show_share_button:8},null,[-1,-1])}}function xe(l){let t,e,i,n;const o=[l[0]];let g={};for(let a=0;a<o.length;a+=1)g=He(g,o[a]);return t=new Ie({props:g}),i=new pe({props:{label:l[2],value:l[8],show_label:l[1],root:l[3],root_url:l[4],grid_cols:l[12],grid_rows:l[13],height:l[14],preview:l[15],object_fit:l[17],allow_preview:l[16],show_share_button:l[18]}}),i.$on("select",l[19]),i.$on("share",l[20]),i.$on("error",l[21]),{c(){q(t.$$.fragment),e=R(),q(i.$$.fragment)},m(a,s){H(t,a,s),C(a,e,s),H(i,a,s),n=!0},p(a,s){const c=s&1?Me(o,[ye(a[0])]):{};t.$set(c);const u={};s&4&&(u.label=a[2]),s&256&&(u.value=a[8]),s&2&&(u.show_label=a[1]),s&8&&(u.root=a[3]),s&16&&(u.root_url=a[4]),s&4096&&(u.grid_cols=a[12]),s&8192&&(u.grid_rows=a[13]),s&16384&&(u.height=a[14]),s&32768&&(u.preview=a[15]),s&131072&&(u.object_fit=a[17]),s&65536&&(u.allow_preview=a[16]),s&262144&&(u.show_share_button=a[18]),i.$set(u)},i(a){n||(z(t.$$.fragment,a),z(i.$$.fragment,a),n=!0)},o(a){G(t.$$.fragment,a),G(i.$$.fragment,a),n=!1},d(a){a&&D(e),I(t,a),I(i,a)}}}function $e(l){let t,e;return t=new Fe({props:{visible:l[7],variant:"solid",padding:!1,elem_id:l[5],elem_classes:l[6],container:l[9],scale:l[10],min_width:l[11],allow_overflow:!1,height:typeof l[14]=="number"?l[14]:void 0,$$slots:{default:[xe]},$$scope:{ctx:l}}}),{c(){q(t.$$.fragment)},m(i,n){H(t,i,n),e=!0},p(i,[n]){const o={};n&128&&(o.visible=i[7]),n&32&&(o.elem_id=i[5]),n&64&&(o.elem_classes=i[6]),n&512&&(o.container=i[9]),n&1024&&(o.scale=i[10]),n&2048&&(o.min_width=i[11]),n&16384&&(o.height=typeof i[14]=="number"?i[14]:void 0),n&4714783&&(o.$$scope={dirty:n,ctx:i}),t.$set(o)},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){I(t,i)}}}function el(l,t,e){let{loading_status:i}=t,{show_label:n}=t,{label:o}=t,{root:g}=t,{root_url:a}=t,{elem_id:s=""}=t,{elem_classes:c=[]}=t,{visible:u=!0}=t,{value:r=null}=t,{container:f=!0}=t,{scale:m=null}=t,{min_width:b=void 0}=t,{grid_cols:E=[2]}=t,{grid_rows:j=void 0}=t,{height:d="auto"}=t,{preview:B}=t,{allow_preview:k=!0}=t,{object_fit:T="cover"}=t,{show_share_button:v=!1}=t;function F(h){U.call(this,l,h)}function X(h){U.call(this,l,h)}function W(h){U.call(this,l,h)}return l.$$set=h=>{"loading_status"in h&&e(0,i=h.loading_status),"show_label"in h&&e(1,n=h.show_label),"label"in h&&e(2,o=h.label),"root"in h&&e(3,g=h.root),"root_url"in h&&e(4,a=h.root_url),"elem_id"in h&&e(5,s=h.elem_id),"elem_classes"in h&&e(6,c=h.elem_classes),"visible"in h&&e(7,u=h.visible),"value"in h&&e(8,r=h.value),"container"in h&&e(9,f=h.container),"scale"in h&&e(10,m=h.scale),"min_width"in h&&e(11,b=h.min_width),"grid_cols"in h&&e(12,E=h.grid_cols),"grid_rows"in h&&e(13,j=h.grid_rows),"height"in h&&e(14,d=h.height),"preview"in h&&e(15,B=h.preview),"allow_preview"in h&&e(16,k=h.allow_preview),"object_fit"in h&&e(17,T=h.object_fit),"show_share_button"in h&&e(18,v=h.show_share_button)},[i,n,o,g,a,s,c,u,r,f,m,b,E,j,d,B,k,T,v,F,X,W]}class ll extends _e{constructor(t){super(),ce(this,t,el,$e,he,{loading_status:0,show_label:1,label:2,root:3,root_url:4,elem_id:5,elem_classes:6,visible:7,value:8,container:9,scale:10,min_width:11,grid_cols:12,grid_rows:13,height:14,preview:15,allow_preview:16,object_fit:17,show_share_button:18})}}const cl=ll,hl=["static"],ml=l=>({type:{payload:"Array<{ name: string } | [{ name: string }, string]>"},description:{payload:"list of objects, with filename and optional caption,"}});export{cl as Component,ml as document,hl as modes};
//# sourceMappingURL=index-a88f5656.js.map
